<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
</head>
<body ng-app="app">

<div ng-controller="mainCtrl">
  <ul>
    <!-- <li ng-repeat="com in complex">{{com.name}}</li> -->
  </ul>
  <!-- {{complex}} -->
  {{entity}}

</div>

<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script src="bower_components/angular/angular.js"></script>
<script>
  var app = angular.module("app", []);

  app.controller("mainCtrl", function($scope, $http) {

    $scope.complex = [];
    $scope.entity = [];

    var req = {
      method: "GET",
      url: "http://localhost:4000/api/complex"
    }
    var req1 = {
      method: "GET",
      url: "http://localhost:4000/api/entity"
    }

    $http(req).then(function(data){
      // console.log(data);
    }, function(err){
      console.log(err);
    });
    $http(req1).then(function(data){
      // console.log(data);
    }, function(err){
      console.log(err);
    });

    var socket = io.connect('http://localhost:4000/');
    socket.on('entity', function (data) {
      console.log(data);
    });
    socket.on('complex', function (data) {
      // console.log(data);
      $scope.complex.push(data);
    });

    var socket1 = io.connect('http://localhost:4000/entities');
    socket1.on('entity', function (data) {
      console.log(data);
      $scope.entity.push(data);
      $scope.$apply();
    });

  })

</script>
</body>
</html>
